<title>Layer plot</title>
<link rel="stylesheet" type="text/css" href="../src/style.css">

<body>

<div id="main_scatter_plot"></div>


<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="../build/d3-linked-charts.js"></script>
<script src="mtcars.json.js">></script>

<script>

  var highlighted = 0;

  var sc = d3.axisChart()
    .labelX( "weight" )
    .labelY( "horsepower" );

	d3.scatterChart("scatter", sc)
    .x( function(i) { return data[i].wt } )
    .y( function(i) { return data[i].hp } )
    .style( function(i) { 
			return i == highlighted ? "fill: red" : "" } )
		.on_click( function(k) { 
			highlighted = k; 
			sc.update();
		} )
		.groupName(function(i) {return data[i].cyl;});
	d3.lineChart("line", sc)
		.nlines(1)
		.lineFun(function(id, x) {return x*30;});

	sc.place();

  data = data.filter( function(x) { return x.hp < 300 } )

  setTimeout( function() { sc.update() }, 2000 );
</script>