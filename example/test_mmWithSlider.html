<html>
<title>Multiple myeloma correlation heatmap</title>
<link rel="stylesheet" type="text/css" href="../src/style.css">

<script src = "https://d3js.org/d3.v4.min.js"></script>
<script src = "https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src = "https://d3js.org/d3-color.v1.min.js"></script>
<script src = "../src/lib/clusterfck.js"></script>
<script src = "mm_data.js"></script>
<script src = "../build/d3-linked-charts.js"></script>

<body>
<div id = "heatmap"></div>
<div id = "slider"></div>
<button onclick = "layer.clusterRows()">Cluster Rows</button><br>
<button onclick = "layer.clusterCols()">Cluster Columns</button>

<script>
var heatmap = d3.heatmapChart()
	.width(700)
	.height(700)
	.margin({top: 100, bottom: 10, left: 150, right: 10})
	.rowIds(inputData.samplenames)
	.colIds(inputData.samplenames)
	.showLegend(false)
	.value(function(rowId, colId){
		return inputData.distmatrix[inputData.samplenames.indexOf(rowId)]
																[inputData.samplenames.indexOf(colId)];
	})
	.place("#heatmap");

var slider = d3.sigmoidColorSlider()
	.straightColorScale(heatmap.colourScale)
	.set_margin({left: 150})
	.on_change(function(){
		heatmap.colour(function(val){
			return heatmap.get_palette(slider.the_sigmoid(val));
		});
		heatmap.updateCellColour();
	})
  .place("#slider");

</script>

</body>
</html>